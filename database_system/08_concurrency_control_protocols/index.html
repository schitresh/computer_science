<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Concurrency Control Protocols - Computer Science</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Computer Science</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Computer Science</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Computer networks</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../computer_networks/00_index/" class="dropdown-item">00 index</a>
</li>
                                    
<li>
    <a href="../../computer_networks/01_introduction/" class="dropdown-item">01 introduction</a>
</li>
                                    
<li>
    <a href="../../computer_networks/02_network_devices/" class="dropdown-item">02 network devices</a>
</li>
                                    
<li>
    <a href="../../computer_networks/03_osi_model/" class="dropdown-item">03 osi model</a>
</li>
                                    
<li>
    <a href="../../computer_networks/04_tcp_ip_model/" class="dropdown-item">04 tcp ip model</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">05 network security</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../computer_networks/05_network_security/00_index/" class="dropdown-item">Network Security</a>
</li>
            
<li>
    <a href="../../computer_networks/05_network_security/01_introduction/" class="dropdown-item">01 introduction</a>
</li>
            
<li>
    <a href="../../computer_networks/05_network_security/02_threat_modeling/" class="dropdown-item">02 threat modeling</a>
</li>
            
<li>
    <a href="../../computer_networks/05_network_security/03_malware/" class="dropdown-item">03 malware</a>
</li>
            
<li>
    <a href="../../computer_networks/05_network_security/04_dos_denial_of_service/" class="dropdown-item">04 dos denial of service</a>
</li>
            
<li>
    <a href="../../computer_networks/05_network_security/05_miscellaneous_attacks/" class="dropdown-item">05 miscellaneous attacks</a>
</li>
            
<li>
    <a href="../../computer_networks/05_network_security/06_firewall/" class="dropdown-item">06 firewall</a>
</li>
            
<li>
    <a href="../../computer_networks/05_network_security/07_message_authentication_codes/" class="dropdown-item">07 message authentication codes</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">L1 physical layer</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../computer_networks/L1_physical_layer/00_index/" class="dropdown-item">L1: Physical Layer</a>
</li>
            
<li>
    <a href="../../computer_networks/L1_physical_layer/01_introduction/" class="dropdown-item">01 introduction</a>
</li>
            
<li>
    <a href="../../computer_networks/L1_physical_layer/02_architecture/" class="dropdown-item">02 architecture</a>
</li>
            
<li>
    <a href="../../computer_networks/L1_physical_layer/03_transmission/" class="dropdown-item">03 transmission</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">L2 data link layer</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../computer_networks/L2_data_link_layer/00_index/" class="dropdown-item">00 index</a>
</li>
            
<li>
    <a href="../../computer_networks/L2_data_link_layer/01_introduction/" class="dropdown-item">01 introduction</a>
</li>
            
<li>
    <a href="../../computer_networks/L2_data_link_layer/02_switching/" class="dropdown-item">02 switching</a>
</li>
            
<li>
    <a href="../../computer_networks/L2_data_link_layer/03_multiple_access_control/" class="dropdown-item">03 multiple access control</a>
</li>
            
<li>
    <a href="../../computer_networks/L2_data_link_layer/04_sliding_window_protocol/" class="dropdown-item">04 sliding window protocol</a>
</li>
            
<li>
    <a href="../../computer_networks/L2_data_link_layer/05_error_detection/" class="dropdown-item">05 error detection</a>
</li>
            
<li>
    <a href="../../computer_networks/L2_data_link_layer/06_virtual_lan/" class="dropdown-item">06 virtual lan</a>
</li>
            
<li>
    <a href="../../computer_networks/L2_data_link_layer/07_mobile_communication/" class="dropdown-item">07 mobile communication</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">L3 network layer</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../computer_networks/L3_network_layer/00_index/" class="dropdown-item">00 index</a>
</li>
            
<li>
    <a href="../../computer_networks/L3_network_layer/01_introduction/" class="dropdown-item">01 introduction</a>
</li>
            
<li>
    <a href="../../computer_networks/L3_network_layer/02_ip_internet_protocol/" class="dropdown-item">02 ip internet protocol</a>
</li>
            
<li>
    <a href="../../computer_networks/L3_network_layer/03_ip_v6/" class="dropdown-item">03 ip v6</a>
</li>
            
<li>
    <a href="../../computer_networks/L3_network_layer/04_ip_datagram_fragmentation/" class="dropdown-item">04 ip datagram fragmentation</a>
</li>
            
<li>
    <a href="../../computer_networks/L3_network_layer/05_icmp_internet_control_message_protocol/" class="dropdown-item">05 icmp internet control message protocol</a>
</li>
            
<li>
    <a href="../../computer_networks/L3_network_layer/06_arp_address_resolution_protocol/" class="dropdown-item">06 arp address resolution protocol</a>
</li>
            
<li>
    <a href="../../computer_networks/L3_network_layer/07_routing/" class="dropdown-item">07 routing</a>
</li>
            
<li>
    <a href="../../computer_networks/L3_network_layer/08_routing_protocols/" class="dropdown-item">08 routing protocols</a>
</li>
            
<li>
    <a href="../../computer_networks/L3_network_layer/09_nat_network_address_translation/" class="dropdown-item">09 nat network address translation</a>
</li>
            
<li>
    <a href="../../computer_networks/L3_network_layer/10_isdn_integrated_services_digital_network/" class="dropdown-item">10 isdn integrated services digital network</a>
</li>
            
<li>
    <a href="../../computer_networks/L3_network_layer/11_aaa_authentication_authorization_accounting/" class="dropdown-item">11 aaa authentication authorization accounting</a>
</li>
            
<li>
    <a href="../../computer_networks/L3_network_layer/12_access_control/" class="dropdown-item">12 access control</a>
</li>
            
<li>
    <a href="../../computer_networks/L3_network_layer/13_wifi/" class="dropdown-item">13 wifi</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">L4 transport layer</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../computer_networks/L4_transport_layer/00_index/" class="dropdown-item">00 index</a>
</li>
            
<li>
    <a href="../../computer_networks/L4_transport_layer/01_introduction/" class="dropdown-item">01 introduction</a>
</li>
            
<li>
    <a href="../../computer_networks/L4_transport_layer/02_tcp_transmission_control_protocol/" class="dropdown-item">02 tcp transmission control protocol</a>
</li>
            
<li>
    <a href="../../computer_networks/L4_transport_layer/03_udp_user_datagram_protocol/" class="dropdown-item">03 udp user datagram protocol</a>
</li>
            
<li>
    <a href="../../computer_networks/L4_transport_layer/04_congestion_control/" class="dropdown-item">04 congestion control</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">L5 session layer</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../computer_networks/L5_session_layer/00_index/" class="dropdown-item">00 index</a>
</li>
            
<li>
    <a href="../../computer_networks/L5_session_layer/01_introduction/" class="dropdown-item">01 introduction</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">L6 presentation layer</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../computer_networks/L6_presentation_layer/00_index/" class="dropdown-item">00 index</a>
</li>
            
<li>
    <a href="../../computer_networks/L6_presentation_layer/01_introduction/" class="dropdown-item">01 introduction</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">L7 application layer</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../computer_networks/L7_application_layer/00_index/" class="dropdown-item">00 index</a>
</li>
            
<li>
    <a href="../../computer_networks/L7_application_layer/01_introduction/" class="dropdown-item">01 introduction</a>
</li>
            
<li>
    <a href="../../computer_networks/L7_application_layer/02_http_hypertext_transfer_protocol/" class="dropdown-item">02 http hypertext transfer protocol</a>
</li>
            
<li>
    <a href="../../computer_networks/L7_application_layer/03_atm_asynchonous_transfer_mode/" class="dropdown-item">03 atm asynchonous transfer mode</a>
</li>
            
<li>
    <a href="../../computer_networks/L7_application_layer/04_smtp_simple_mail_transfer_protocol/" class="dropdown-item">04 smtp simple mail transfer protocol</a>
</li>
            
<li>
    <a href="../../computer_networks/L7_application_layer/05_ftp_file_transfer_protocol/" class="dropdown-item">05 ftp file transfer protocol</a>
</li>
            
<li>
    <a href="../../computer_networks/L7_application_layer/06_ssh_secure_shell/" class="dropdown-item">06 ssh secure shell</a>
</li>
            
<li>
    <a href="../../computer_networks/L7_application_layer/07_dns_domain_system_name/" class="dropdown-item">07 dns domain system name</a>
</li>
            
<li>
    <a href="../../computer_networks/L7_application_layer/08_dhcp_dynamic_host_configuration_protocol/" class="dropdown-item">08 dhcp dynamic host configuration protocol</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Database system</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../00_index/" class="dropdown-item">Database Management System</a>
</li>
                                    
<li>
    <a href="../01_introduction/" class="dropdown-item">Introduction</a>
</li>
                                    
<li>
    <a href="../02_entity_relationship_model/" class="dropdown-item">Entity Relationship Model</a>
</li>
                                    
<li>
    <a href="../03_relational_model/" class="dropdown-item">Relational Model</a>
</li>
                                    
<li>
    <a href="../04_functional_dependency/" class="dropdown-item">Functional Dependency</a>
</li>
                                    
<li>
    <a href="../05_normalization/" class="dropdown-item">Normalization</a>
</li>
                                    
<li>
    <a href="../06_transactions_and_schedules/" class="dropdown-item">Transaction and Schedules</a>
</li>
                                    
<li>
    <a href="../07_concurrency_control/" class="dropdown-item">Concurrency Control</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Concurrency Control Protocols</a>
</li>
                                    
<li>
    <a href="../09_recoverability_and_processing/" class="dropdown-item">Recoverability and Processing</a>
</li>
                                    
<li>
    <a href="../10_indexing/" class="dropdown-item">Indexing</a>
</li>
                                    
<li>
    <a href="../11_file_organization/" class="dropdown-item">File Organization</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Object oriented programming</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../object_oriented_programming/00_index/" class="dropdown-item">Object Oriented Programming</a>
</li>
                                    
<li>
    <a href="../../object_oriented_programming/01_introduction/" class="dropdown-item">01 introduction</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Operating system</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../operating_system/00_index/" class="dropdown-item">Operating System</a>
</li>
                                    
<li>
    <a href="../../operating_system/01_introduction/" class="dropdown-item">01 introduction</a>
</li>
                                    
<li>
    <a href="../../operating_system/02_system_structure/" class="dropdown-item">02 system structure</a>
</li>
                                    
<li>
    <a href="../../operating_system/03_process_management/" class="dropdown-item">03 process management</a>
</li>
                                    
<li>
    <a href="../../operating_system/04_process_scheduling/" class="dropdown-item">04 process scheduling</a>
</li>
                                    
<li>
    <a href="../../operating_system/05_process_synchronization/" class="dropdown-item">05 process synchronization</a>
</li>
                                    
<li>
    <a href="../../operating_system/06_process_synchronization_solutions/" class="dropdown-item">06 process synchronization solutions</a>
</li>
                                    
<li>
    <a href="../../operating_system/07_process_synchronization_application/" class="dropdown-item">07 process synchronization application</a>
</li>
                                    
<li>
    <a href="../../operating_system/08_thread_management/" class="dropdown-item">08 thread management</a>
</li>
                                    
<li>
    <a href="../../operating_system/09_resource_allocation/" class="dropdown-item">09 resource allocation</a>
</li>
                                    
<li>
    <a href="../../operating_system/10_memory/" class="dropdown-item">10 memory</a>
</li>
                                    
<li>
    <a href="../../operating_system/11_memory_management/" class="dropdown-item">11 memory management</a>
</li>
                                    
<li>
    <a href="../../operating_system/12_virtual_memory/" class="dropdown-item">12 virtual memory</a>
</li>
                                    
<li>
    <a href="../../operating_system/13_storage_management/" class="dropdown-item">13 storage management</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../07_concurrency_control/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../09_recoverability_and_processing/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#concurrency-control-protocols" class="nav-link">Concurrency Control Protocols</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#lock-based-protocols" class="nav-link">Lock Based Protocols</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#two-phase-locking-protocol" class="nav-link">Two-Phase Locking Protocol</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#graph-based-protocols" class="nav-link">Graph Based Protocols</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#multiple-granularity-locking" class="nav-link">Multiple Granularity Locking</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#timestamp-based-protocols" class="nav-link">Timestamp Based Protocols</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#timstamp-ordering-protocol" class="nav-link">Timstamp Ordering Protocol</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#thomas-write-rule-write-ahead-logging-protocol" class="nav-link">Thomas Write Rule (Write Ahead Logging Protocol)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="concurrency-control-protocols">Concurrency Control Protocols</h1>
<h2 id="lock-based-protocols">Lock Based Protocols</h2>
<ul>
<li>Each transaction needs to acquire locks before accessing or modifying the data items</li>
<li>Shared Lock</li>
<li>Read lock, no modification allowed</li>
<li>Allows multiple transactions to read the data simultaneously</li>
<li>Exclusive Locks</li>
<li>Write lock, allows updation</li>
<li>Only one transaction can hold this lock on a data item at a time</li>
<li>A transaction is allowed to upgrade or downgrade a lock if the conditions are met</li>
<li>Simple lock based protocal (binary locking) don't guarantee serializability</li>
<li>Additional protocols for positioning of locking &amp; unlocking operations are required</li>
<li>Which gives rise to two phase locking protocol</li>
<li>Starvation and deadlocks are possible</li>
</ul>
<h3 id="locking">Locking</h3>
<ul>
<li>Lock manager manages the locking requests made by transactions</li>
<li>It relies on the process of message passing between transactions and lock manager</li>
<li>Lock table</li>
<li>Hash table where names of data items are used as hashing index</li>
<li>Every locked data item has a linked list associated with it</li>
<li>Every node in the list represents a transaction that requested lock<ul>
<li>Mode of lock requested (mutual/exclusive)</li>
<li>Current status of the request (granted/waiting)</li>
</ul>
</li>
<li>Collisions are handled by separate chaining</li>
<li>A node is deleted after unlock or abort</li>
</ul>
<h2 id="two-phase-locking-protocol">Two-Phase Locking Protocol</h2>
<ul>
<li>Phases</li>
<li>Growing<ul>
<li>The transaction starts acquiring locks before performing any modification to data items</li>
<li>Once a lock is acquired, it cannot be released until the end of the execution</li>
<li>Upgrading is allowed in growing phase only</li>
</ul>
</li>
<li>Shrinking<ul>
<li>The transaction releases all the acquired locks after all the modifications</li>
<li>Once it starts releasing the locks, it cannot acquire any locks further</li>
<li>Downgrading is allowed in shrinking phase only</li>
</ul>
</li>
<li>Lock Point</li>
<li>The point at which the growing phase ends</li>
<li>That is, when a transaction takes the final lock</li>
<li>Cascading Rollback is possible if the dependent transaction's commit fails</li>
<li>To claim an exclusive (write) lock</li>
<li>Transaction must acquire a shared (read) lock first</li>
<li>And then upgrade it to an exclusive lock</li>
<li>Problems</li>
<li>Deadlock<ul>
<li>Example: L1(A), L2(B), L1(B), L2(A)</li>
<li>T1 granted A, T2 granted B</li>
<li>T1 waiting for B, T2 waiting for A</li>
</ul>
</li>
<li>Starvation</li>
<li>Does not ensure recoverability</li>
</ul>
<h3 id="strict-2pl-protocol">Strict 2PL Protocol</h3>
<ul>
<li>In 2PL, transactions can release any lock before committing</li>
<li>In strict 2PL, transactions can release exclusive locks only after they commit</li>
<li>Recoverable, Cascadeless</li>
<li>Deadlocks are possible</li>
<li>Most popular version of 2PL</li>
</ul>
<h3 id="rigorous-2pl-protocol">Rigorous 2PL Protocol</h3>
<ul>
<li>Transactions can release a shared or exclusive lock only after they commit</li>
<li>Recoverable, Cascadeless</li>
<li>Deadlocks are possible</li>
</ul>
<h3 id="conservative-or-static-2pl-protocol">Conservative or Static 2PL Protocol</h3>
<ul>
<li>The transaction should lock all the items before starting execution</li>
<li>By predeclaring its read-set and write-set</li>
<li>If any of the predeclared items cannot be locked<ul>
<li>Then the transaction should not lock any of the items</li>
<li>And wait till all the items are available for locking</li>
</ul>
</li>
<li>Locks can be released at any time</li>
<li>Not cascadeless, so does not ensure a strict schedule</li>
<li>Deadlock free, since one deadlock condition (hold &amp; wait) is nullified</li>
<li>Difficult to use in practice because predeclaration is not possible in many situations</li>
</ul>
<h2 id="graph-based-protocols">Graph Based Protocols</h2>
<ul>
<li>Transactions are represented as nodes in a graph</li>
<li>And the conflicts between them as edges</li>
<li>If a transaction tries to acquire an exclusive lock on an item</li>
<li>And if that is already locked by another transaction</li>
<li>Then a conflict edge is added between their nodes</li>
<li>When the transaction is completed, its edges are removed</li>
<li>Before granting a lock, graph is checked for any cycles</li>
<li>If a cycle exists, there is a conflict</li>
<li>And one of the transactions needs to be rolled back to break the cycle</li>
<li>It can handle complex transactions better than two-phase locking</li>
<li>But it's computationally expensive</li>
<li>And may not scale well for large databases</li>
<li>Tree Based Protocol</li>
<li>Simple implementation of graph based protocol</li>
<li>Data item A can be locked by T1 only if the parent of A is currently locked by T1</li>
<li>Data items can be unlocked at any time</li>
</ul>
<h2 id="multiple-granularity-locking">Multiple Granularity Locking</h2>
<ul>
<li>Various concurrency control protocols perform synchronization on individual data items</li>
<li>If a transaction need to access the entire database<ul>
<li>It will need to lock each item individually</li>
</ul>
</li>
<li>This is inefficient and it would be simpler if a single lock can lock the entire database</li>
<li>But if another transaction needs to access a few data items, it should be able to do that</li>
<li>Locking the entire database in that case will result in loss of concurrency</li>
<li>Granularity is the size of the data item allowed to lock</li>
<li>Multiple granularity means hierarchically breaking up the database into blocks</li>
<li>That can be locked and can be tracked what needs to be locked &amp; in what fashion</li>
<li>How does the system determine if the root node can be locked</li>
<li>If it searches the entire tree, it will nullify the whole purpose of this locking scheme</li>
<li>A more efficient way is to introduce a new lock mode (intention lock)</li>
</ul>
<h3 id="representation">Representation</h3>
<ul>
<li>It can be represented graphically as a tree. Example:</li>
<li>Root: Entire database</li>
<li>1st Level: Areas within the database</li>
<li>2nd Level: Files within each area (each file can have only one area)</li>
<li>3rd Level: Records within each file</li>
<li>Each node can be locked (shared or exclusive) individually</li>
<li>When a node is locked, it implicitly locks all the descendants in the same mode</li>
</ul>
<h3 id="intention-locks">Intention Locks</h3>
<ul>
<li>In addition to Shared (S) &amp; Exclusive (X) locks, multiple granularity has 3 additional locks</li>
<li>This ensures serializability</li>
<li>Intention-Shared (IS)</li>
<li>Intention-Exclusive (IX)</li>
<li>Shared &amp; Intention-Exclusive (SIX)</li>
</ul>
<h3 id="procedure-for-transaction-to-acquire-lock">Procedure for transaction to acquire lock</h3>
<ul>
<li>Check the lock compatiblity</li>
<li>Lock the root of the tree first in any mode</li>
<li>Follows 2PL, so deadlocks are possible</li>
<li>Locks are acquired top-down (root to leaf) and released bottom-up (leaf to root)</li>
<li>Lock can be acquired only</li>
<li>If the parent is locked</li>
<li>If none of the children is locked</li>
<li>Node can be locked in</li>
<li>S, IS if the parent is in IX, IS</li>
<li>X, IX, SIX if the parent is in IX, SIX</li>
</ul>
<h2 id="timestamp-based-protocols">Timestamp Based Protocols</h2>
<ul>
<li>Each transaction has a timestamp attached to it</li>
<li>The timestamps are usually assigned in the order of submission</li>
<li>The conflicting pairs of operations can be resolved by their timestamps</li>
<li>TS(T) â€“ Timestamp of transaction T when submitted</li>
<li>TS(W(X)): Latest timestamp when any transaction executed W(X) successfully</li>
<li>TS(R(X)): Latest timestamp when any transaction executed R(X) successfully</li>
</ul>
<h3 id="deadlock-prevention">Deadlock Prevention</h3>
<ul>
<li>Wait Die</li>
<li>An older transaction should wait for a younger transaction</li>
<li>If a younger transaction waiting for an older transaction<ul>
<li>Younger transaction should be aborted and restarted with the same timestamp</li>
</ul>
</li>
<li>Non-preemptive technique</li>
<li>Wound Wait</li>
<li>A younger transaction should wait for an older transaction</li>
<li>If an older transaction is waiting for a younger transaction<ul>
<li>Younger transaction should be aborted and restarted with the same timestamp</li>
</ul>
</li>
<li>Preemptive technique</li>
<li>In both cases, younger transaction is aborted</li>
<li>Based on the assumption that it will waste less processing effort</li>
</ul>
<h2 id="timstamp-ordering-protocol">Timstamp Ordering Protocol</h2>
<ul>
<li>Ensures that the conflicting operations do not violate the ordering</li>
<li>If R(X) and W(X) are conflicting operations</li>
<li>Then R(X) is processed before W(X) if and only if TS(T1) &lt; TS(T2)</li>
<li>If a schedule doesn't follow a timestamp serializability, reject and rollback the transaction</li>
<li>Each transaction is assigned a unique timestamp when it enters the system</li>
<li>Ensuring that all operations follow a specific order</li>
<li>Making the schedule conflict serializable and deadlock free</li>
<li>Cascading rollbacks are possible</li>
<li>If T2 occurs before T1</li>
<li>Allowed Operations<ul>
<li>R1(X), R2(X)</li>
</ul>
</li>
<li>Not Allowed Operations<ul>
<li>R1(X), W2(X)</li>
<li>W1(X), R2(X)</li>
<li>W1(X), W2(X)</li>
</ul>
</li>
<li>Strict Timestamp Ordering</li>
<li>A variation where the read or write operation is delayed</li>
<li>Until the transaction that wrote the value of the data item is committed or aborted</li>
</ul>
<h3 id="working">Working</h3>
<ul>
<li>If a transaction Ti issues a read(X) operation</li>
<li>If TS(T) &lt; TS(W(X)): Abort and rollback</li>
<li>If TS(T) &gt;= TS(W(X)): Execute W(X) and set TS(W(X)) to TS(T)</li>
<li>All data-item timestamps updated</li>
<li>If a transaction Ti issues a write(X) operation</li>
<li>If TS(Ti) &lt; RTS(X): Operation rejected</li>
<li>If TS(Ti) &lt; WTS(X): Operation rejected and Ti rolled back</li>
<li>Else: Operation executed</li>
</ul>
<h2 id="thomas-write-rule-write-ahead-logging-protocol">Thomas Write Rule (Write Ahead Logging Protocol)</h2>
<ul>
<li>Any modification to a database must be written to disk</li>
<li>Before the control is returned to a user</li>
<li>This ensures that database remains consistent and durable</li>
<li>Modification of the basic timestamp ordering protocol</li>
<li>Does not enforce conflict serializability</li>
<li>But rejects fewer write operations by modifying the check operations for W(X)</li>
<li>If T2 occurs before T1</li>
<li>Allowed Operations<ul>
<li>W1(X), W2(X)</li>
<li>R1(X), R2(X)</li>
</ul>
</li>
<li>Not Allowed Operations<ul>
<li>R1(X), W2(X)</li>
<li>W1(X), R2(X)</li>
</ul>
</li>
</ul>
<h3 id="working_1">Working</h3>
<ul>
<li>If TS(R(X)) &gt; TS(T): Abort and rollback T</li>
<li>If TS(W(X)) &gt; TS(T): Skip the write operation and continue</li>
<li>Case of outdated of obsolete writes</li>
<li>A transaction has already updated the value of X</li>
<li>TO protocol aborts such a transaction</li>
<li>Example Schedule: T2(R(X)), T1(W(X)), T2(W(X)) but T1 already wrote X</li>
<li>Else: Execute W(X) and set TS(W(X)) to TS(T)</li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
