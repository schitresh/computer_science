## Parameters
- Performance Criteria
  - Number of hops
  - Cost (send packet with high bandwidth path)
  - Delay (size of queue)
  - Throughput time
- Decision Time
  - When to decide to route a packet
  - Per packet (datagram) or per session (virtual circuit)
- Decision Place
  - Who will decide about routing
  - Each node (distributed) or central node (centralized) or originate node (source)
- Network information
  - Source: local, adjacent node, nodes along the route, all nodes
  - Update time: continuous, periodic, major load change, topology change

## Strategies
### Fixed Routing
- A route is selected for each source & destination pair of nodes in the network
  - The route is fixed and changes only if the topology changes
- Central routing matrix is created based on the least cost path
  - It shows each source-destination and identity of next node on the route
  - Stored in the network control center, but if that fails everything will collapse
  - Famous path algorithms: dijkstra, bellman ford
- Doesn't react to failure or network congestion

### Flooding
- Every incoming packet is sent out on every outgoing node
  - All possible routes between the source & destination are tried
  - Generates a vast amount of duplicate packets
- Requires no network info like topology, load condition, cost of different paths
- If an approximation is known, a hop counter is sent which is decremented at each hop
  - The packet is discarded when the counter becomes zero
- Highly robust, always chooses the shortest path
  - But wastes a lot of network resources and leads to congestion
  - Used to send emergency messages or in military applications

## Redundant Link Problems
- Redundant links are used to prevent nasty network failures
  - By providing backups but it can cause some problems
- Broadcast storm
  - A switch forwards out a broadcast frame generated by another device to all its hosts
  - If no loop avoidance schemes are applied, the switches will flood broadcasts endlessly
  - This can shut down the entire network in seconds by consuming all the bandwidth
- Multiple copies
  - A device receives multiple copies of the same frame
    - From different network segements at the same time
  - If a protocol cannot handle duplicate transmission, it can be a problem
- MAC table thrashing
  - Switches use MAC address table to forward frames
  - When a switch receives a frame
    - It makes an entry of the device mac address with the switch port on which it's received
  - But if the switch receives the frame of the same source from multiple links
    - It can be confusing for the switch to make an entry
    - This can lead to unstability in MAC table
  - Spanning Tree Protocol (STP) is used to prevent these loops
    - It will block down a port path for frame delivery at a time
    - If one path goes down, then the blocked path becomes active

## Administrative Distance (AD)
- Used to rate the trustworthiness of routing information received from a neighbor router
- The route with the least AD is selected as the best route and placed in the routing table
- It is an integer value from 0 to 255
  - 0 shows that the route is most trusted
  - 255 means that no traffic will be passed through that route
- Default AD
  - Connected interface: 0, Static route: 1
  - External BGP: 20
  - EIGRP: 90, OSPF: 110, RIP: 120
  - External EIGRP: 170, Internal BGP: 200
  - Unknown (not used): 255

## Autonomous System (AS)
- Group of routers & networks working under a single administrative domain
- 16-bit value that defines the routing domain of the routers (1 to 65535)
- Public AS number
  - Service provider provides a public AS
    - If the customer is connected to multiple ISPs (mutli home network)
  - Ranges from 1 to 64511
- Private AS number
  - Service provider provides a private AS
    - If the customer wants multi-connection to a single ISP
    - For example, single home or dual home network

## Longest Prefix Matching in Routers
- IP prefix
  - All computers on one network have the same IP prefix
  - For example, in 192.24.0.0/18, first 18 bits of the address is prefix
- Forwarding
  - Moving incoming packets to the appropriate interface
  - Routers use a forwarding table
    - To decide which incoming packets should be forwarded to which hop
  - They search the destination address's IP prefix in the forwarding table
- Prefixes might overlap since classless addressing is used everywhere
  - In that case, routers use the longest prefix matching rule
  - The table entry with the longest prefix matching
    - With the incoming packet's destination IP is considered
