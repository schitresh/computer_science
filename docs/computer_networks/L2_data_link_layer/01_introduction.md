## Data Link Layer
- Basic info
  - Packet: Frame
  - Devices: Switch, Bridge, NIC/adaptor/chip, device driver
- Features
  - Error free transfer of data from one node to another over the physical layer
  - Transmits a packet arrived in a network to the host using the MAC address
  - Receiver's MAC address is obtained by placing an ARP (Address Resolution Protocol) request
- Has two sublayers
  - Logical Link Control (LLC)
  - Media Access Control (MAC)

## Functions
- Framing
  - The packet received from the network layer is divided into frames
  - Depending on the frame size of the NIC (Network Interface Card)
- Physical addressing
  - In the header of each frame, sender and receiver's MAC addresses are encapsulated
- Error detection
  - Provides error control mechanism
  - Detects and retransmits damaged or lost frames
  - Adds CRC (Cyclic Redundancy Check)
- Flow Control
  - Coordinates the amount of data that can be sent before receiving an acknowledgement
  - Data rate must be constant on both sides else the data may get corrupted
- Access Control
  - Required in a multi-device communication channel
  - Determines which device has control over the link at a given time

## Framing
- In a point to point connection between two devices
  - Where data is transmitted as a stream of bits
  - The bits must be framed into perceptible blocks of information
- Every frame has a header and a trailer
  - That contains information like source & destination address, error detection code
- Different networking devices and protocols may use different framing methods
  - Which might lead to incompatibility issues
- Synchronization can be challenging
  - Particularly in high speed networks where frames are transmitted rapidly

### Types
- Fixed size
  - Frame is of fixed size
  - No need to provide boundaries to the frame, the length itself acts as a delimiter
  - May suffer from internal fragmentation
- Variable size
  - Need to define the beginning & end of the frame to distinguish
  - A length field can be added for this, but sometimes it might get corrupted
  - Or, an end delimiter can be added to indicate the end of a frame
    - Byte stuffing or Character stuffing: ED = '$'
    - Bit stuffing: ED = 01111

## Logical Link Control (LLC)
- Sublayer that provides the logic for the data link
- Controls packet transfer, syncronization, multiplexing, flow control, error checking
- Identifies the address of network layer protocol from header
- Unacknowledged connection-less service that uses LLC PDU (Protocol Data Unit)

### LLC PDU (Protocol Data Unit)
- It has four parts
- Destination Service Access Point (DSAP)
  - Logical address (8-bit) of the network layer entity meant to receive the message
  - Indicates whether this is an individual or group address
- Source Service Access Point (SSAP)
  - Logical address (8-bit) of the network layer entity meant to create the message
  - Indicates whether this is a command or response PDU
- Information Field: Data or information
- Control Field: 8 or 16 bit field used for flow and error control

## Media Access Control (MAC)
- Links LLC and physical layer
- Provides globally unique identification number for a hardware
- When a single communication channel is shared by multiple devices
  - MAC sublayer determines which device has control over the channel at a given time

### MAC Address
- Provides globally unique identification number for a hardware
  - Present in NICs (Network Interface Cards) like wifi card, bluetooth card, ethernet card
  - They have unchangeable MAC address embedded by the vendor
- MAC address is 6 bytes (48 bits) long
  - Left 3 bytes are termed OUI (Organizationally Unique Identifier)
    - Remains same for NICs manufactured by the same company
  - Right 3 bytes are termed NICS (Network Interface Controller Specific)
    - Responsible for communication by cables or wireless
- Types of MAC address
  - Unicast: Sent only to a specific NIC (LSB of the first octet is set to zero)
  - Multicast: Sent to a group of devices (LSB of the first octet is set to one)
  - Broadcast: Sent to every device in a LAN segment (Have ones in all bits)

### MAC Address vs IP Address
- When a device sends data, the data is wrapped in an IP header
  - It includes source & destination IP address
  - IP address is used for end-to-end delivery
    - Ensures that the data reaches the destination
- This IP header along with the data is encapsulated in a MAC header
  - It includes source & destination MAC address for the current hop
  - MAC address is used for hop-to-hop delivery
    - Facilitates the physical transfer of data between network nodes
- As the data travels through routers
  - MAC header is stripped off and a new one is generated for the next hop
  - IP header generated by the original device remains intact till the destination
